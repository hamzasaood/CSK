"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8196],{78196:function(e,t,r){let n,i;r.d(t,{Dk:function(){return eV},$Q:function(){return eJ},pc:function(){return eW}});var a,s,o,l,c,u,d,p,f,E,y,h,v,_,g,L,b,m,S=r(49048),O=Object.defineProperty,A=(e,t,r)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,T=(e,t,r)=>(A(e,"symbol"!=typeof t?t+"":t,r),r);let D="Asset";var I=((n=I||{}).FIELD_ID="data-contentful-field-id",n.ENTRY_ID="data-contentful-entry-id",n.LOCALE="data-contentful-locale",n);function w(e){return!!(e&&"object"==typeof e&&"sys"in e&&e.sys.id)}function C(){return[...new Set([...document.querySelectorAll(`[${I.ENTRY_ID}]`)].map(e=>e.getAttribute(I.ENTRY_ID)).filter(Boolean))]}let N=!1,M=e=>(...t)=>{N&&console[e](...t)},R={error:M("error"),warn:M("warn"),log:M("log")},B=new Set(["Symbol","Text","Integer","Number","Boolean","Date","Location","Object"]);function P({dataFromPreviewApp:e,updateFromEntryEditor:t,name:r}){var n;e[r]=(null==(n=t.fields)?void 0:n[r])??null}function K(e){var t;return!!(B.has(e.type)||"Array"===e.type&&(null==(t=e.items)?void 0:t.type)==="Symbol")}let j=`current-${I.FIELD_ID}`,k=`current-${I.ENTRY_ID}`,U=`current-${I.LOCALE}`,F="contentful-tooltip";function H(e,t,r){let n={...t,method:e,from:"live-preview",source:"live-preview-sdk",location:window.location.href,version:"2.11.11"};R.log("Send message",n),r.forEach(e=>{var t;null==(t=window.top)||t.postMessage(n,e)})}class G{constructor(e,t){T(this,"storageKey"),T(this,"value"),this.storageKey=e,this.value=this.restoreSessionData()||t}getKey(e,t){return`${e}-${t}`}restoreSessionData(){try{let e=window.sessionStorage.getItem(this.storageKey),t=e?JSON.parse(e):null;return Array.isArray(t)?new Map(t):null}catch{return null}}get(e,t){return this.value.get(this.getKey(e,t))}set(e,t,r){this.value.set(this.getKey(e,t),r);try{window.sessionStorage.setItem(this.storageKey,JSON.stringify(Array.from(this.value.entries())))}catch{R.warn(`StorageMap: Failed to set data for key "${e}" in sessionStorage`)}}clear(){this.value.clear();try{window.sessionStorage.removeItem(this.storageKey)}catch{R.warn("StorageMap: Failed to clear data from sessionStorage")}}}function Y(e){if("function"==typeof structuredClone)return structuredClone(e);try{return JSON.parse(JSON.stringify(e))}catch(t){return R.warn("Failed to clone data, updates are done on the original one",e,t),e}}function q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class x{get entities(){return[...this.entitiesMap.values()]}updateEntity(e){this.entitiesMap.set(e.sys.id,e)}getValue(e,t){let r=this.entitiesMap.get(e.sys.id);if(!r||r.sys.type!==e.sys.linkType){console.warn(`Unresolved entity reference: ${e}`);return}return function e(t,r){if(!r.length)return t;try{let[n,...i]=r;return e(t[n],i)}catch{return}}(r,t)}getEntitiesFromMap(e){let t=[],r=[];for(let n of e){let e=this.entitiesMap.get(n);e?t.push(e):r.push(n)}if(r.length)throw Error(`Missing entity in the store (${r.join(",")})`);return t}async fetchAsset(e){try{return this.getEntitiesFromMap([e])[0]}catch{console.warn(`Asset "${e}" is not in the store`);return}}async fetchAssets(e){return this.getEntitiesFromMap(e)}async fetchEntry(e){try{return this.getEntitiesFromMap([e])[0]}catch{console.warn(`Entry "${e}" is not in the store`);return}}async fetchEntries(e){return this.getEntitiesFromMap(e)}constructor({entities:e,locale:t}){q(this,"locale",void 0),q(this,"entitiesMap",void 0),this.entitiesMap=new Map(e.map(e=>[e.sys.id,e])),this.locale=t}}function $(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(a=L||(L={})).REQUEST_ENTITIES="REQUEST_ENTITIES",a.REQUESTED_ENTITIES="REQUESTED_ENTITIES";class z extends x{cleanupPromise(e){setTimeout(()=>{this.requestCache.delete(e)},300)}getCacheId(e){return 1===e.length?e[0]:e.join(this.cacheIdSeperator)}findMissingEntites(e){let t=[];for(let r of e)this.entitiesMap.get(r)||t.push(r);return t}async fetchEntity(e,t){let r=this.findMissingEntites(e);if(0===r.length)return e.map(e=>this.entitiesMap.get(e));let n=this.getCacheId(r),i=this.requestCache.get(n);if(i)return i;let a=new Promise((i,a)=>{let s=this.subscribe("REQUESTED_ENTITIES",t=>{r.every(e=>t.entities.find(t=>t.sys.id===e))&&(clearTimeout(o),i(t.entities),this.cleanupPromise(n),e.forEach(e=>this.cleanupPromise(e)),s())}),o=setTimeout(()=>{a(Error("Request for entities timed out")),s()},this.timeoutDuration);this.sendMessage("REQUEST_ENTITIES",{entityIds:r,entityType:t?"Asset":"Entry",locale:this.locale})});return this.requestCache.set(n,a),e.forEach(e=>{this.requestCache.set(e,a)}),(await a).forEach(e=>{this.entitiesMap.set(e.sys.id,e)}),e.map(e=>this.entitiesMap.get(e))}async fetchAsset(e){try{return(await this.fetchAssets([e]))[0]}catch{console.warn(`Failed to request asset ${e}`);return}}fetchAssets(e){return this.fetchEntity(e,!0)}async fetchEntry(e){try{return(await this.fetchEntries([e]))[0]}catch(t){console.warn(`Failed to request entry ${e}`,t);return}}fetchEntries(e){return this.fetchEntity(e)}constructor({entities:e,locale:t,sendMessage:r,subscribe:n,timeoutDuration:i=3e3}){super({entities:e,locale:t}),$(this,"requestCache",new Map),$(this,"sendMessage",void 0),$(this,"subscribe",void 0),$(this,"timeoutDuration",void 0),$(this,"cacheIdSeperator",","),this.sendMessage=r,this.subscribe=n,this.timeoutDuration=i}}let Q="Collection";function V(e){return e.charAt(0).toUpperCase()+e.slice(1)}function W(e){return`${e}${Q}`}let J={};function X(e,t){return J[e]||(J[e]=new z({entities:[],sendMessage:t,subscribe:(e,t)=>{let r=r=>{"object"==typeof r.data&&r.data&&"live-preview"===r.data.from&&r.data.method===e&&t(r.data)};return window.addEventListener("message",r),()=>window.removeEventListener("message",r)},locale:e})),J[e]}async function Z({entityReferenceMap:e,referenceId:t,isAsset:r,locale:n,sendMessage:i}){var a,s,o;let l=e.get(t);if(l)return{reference:l,typeName:"contentType"in l.sys&&null!=(o=null==(s=null==(a=l.sys)?void 0:a.contentType)?void 0:s.sys)&&o.id?V(l.sys.contentType.sys.id):D};if(r){let e=await X(n,i).fetchAsset(t);if(!e)throw Error(`Unknown reference ${t}`);return{reference:e,typeName:D}}let c=await X(n,i).fetchEntry(t);if(!c)throw Error(`Unknown reference ${t}`);return{reference:c,typeName:V(c.sys.contentType.sys.id)}}var ee=((i=ee||{}).CONNECTED="CONNECTED",i.DISCONNECTED="DISCONNECTED",i.ERROR="ERROR",i.IFRAME_CONNECTED="IFRAME_CONNECTED",i.TAGGED_FIELD_CLICKED="TAGGED_FIELD_CLICKED",i.URL_CHANGED="URL_CHANGED",i.SUBSCRIBED="SUBSCRIBED",i.ENTRY_UPDATED="ENTRY_UPDATED",i.ENTRY_SAVED="ENTRY_SAVED",i.INSPECTOR_MODE_CHANGED="INSPECTOR_MODE_CHANGED",i.DEBUG_MODE_ENABLED="DEBUG_MODE_ENABLED",i.ENTITY_NOT_KNOWN="ENTITY_NOT_KNOWN",i.UNKNOWN_REFERENCE_LOADED="UNKNOWN_REFERENCE_LOADED",i);function et(e,t,r,n){H("TAGGED_FIELD_CLICKED",{action:"TAGGED_FIELD_CLICKED",fieldId:e,entryId:t,locale:r},n)}class er{constructor({locale:e,targetOrigin:t}){T(this,"tooltip",null),T(this,"currentElementBesideTooltip",null),T(this,"defaultLocale"),T(this,"targetOrigin"),this.tooltip=null,this.currentElementBesideTooltip=null,this.defaultLocale=e,this.targetOrigin=t,this.updateTooltipPosition=this.updateTooltipPosition.bind(this),this.addTooltipOnHover=this.addTooltipOnHover.bind(this),this.createTooltip=this.createTooltip.bind(this),this.clickHandler=this.clickHandler.bind(this),this.createTooltip(),window.addEventListener("scroll",this.updateTooltipPosition),window.addEventListener("mouseover",this.addTooltipOnHover)}receiveMessage(e){("action"in e&&"INSPECTOR_MODE_CHANGED"===e.action||e.method===ee.INSPECTOR_MODE_CHANGED)&&document.body.classList.toggle("contentful-inspector--active",e.isInspectorActive)}updateTooltipPosition(){var e;if(!this.currentElementBesideTooltip||!this.tooltip)return!1;let t=this.currentElementBesideTooltip.getBoundingClientRect(),r=null==(e=this.tooltip.parentElement)?void 0:e.getBoundingClientRect();if(t&&r){let e=t.top-32,r=t.left-5;return e<0&&(e=t.top<0?t.top:0),this.tooltip.style.top=e+"px",this.tooltip.style.left=r+"px",!0}return!1}addTooltipOnHover(e){var t,r,n;for(let i of e.composedPath()){if("BODY"===i.nodeName)break;if("function"!=typeof(null==i?void 0:i.getAttribute))continue;let e=i.getAttribute(I.FIELD_ID),a=i.getAttribute(I.ENTRY_ID),s=i.getAttribute(I.LOCALE)??this.defaultLocale;if(e&&a&&s){this.currentElementBesideTooltip=i,this.updateTooltipPosition()&&(null==(t=this.tooltip)||t.setAttribute(j,e),null==(r=this.tooltip)||r.setAttribute(k,a),null==(n=this.tooltip)||n.setAttribute(U,s));break}}}createTooltip(){if(!document.querySelector(`.${F}`)){let e=document.createElement("button");e.classList.add(F),e.innerHTML=`<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M13.5325 2.22242C13.825 2.51492 13.825 2.98742 13.5325 3.27992L12.16 4.65242L9.3475 1.83992L10.72 0.467422C11.0125 0.174922 11.485 0.174922 11.7775 0.467422L13.5325 2.22242ZM0.25 13.7499V10.9374L8.545 2.64243L11.3575 5.45493L3.0625 13.7499H0.25Z" fill="white"/>
      </svg>Edit`,window.document.body.insertAdjacentElement("beforeend",e),e.addEventListener("click",this.clickHandler),this.tooltip=e}this.updateTooltipPosition()}clickHandler(){var e,t,r;let n=null==(e=this.tooltip)?void 0:e.getAttribute(j),i=null==(t=this.tooltip)?void 0:t.getAttribute(k),a=(null==(r=this.tooltip)?void 0:r.getAttribute(U))||this.defaultLocale;n&&i&&a&&et(n,i,a,this.targetOrigin)}}var en="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof global?global:"u">typeof self?self:{},ei={},ea={};Object.defineProperty(ea,"__esModule",{value:!0}),ea.BLOCKS=void 0,(s=ea.BLOCKS||(ea.BLOCKS={})).DOCUMENT="document",s.PARAGRAPH="paragraph",s.HEADING_1="heading-1",s.HEADING_2="heading-2",s.HEADING_3="heading-3",s.HEADING_4="heading-4",s.HEADING_5="heading-5",s.HEADING_6="heading-6",s.OL_LIST="ordered-list",s.UL_LIST="unordered-list",s.LIST_ITEM="list-item",s.HR="hr",s.QUOTE="blockquote",s.EMBEDDED_ENTRY="embedded-entry-block",s.EMBEDDED_ASSET="embedded-asset-block",s.EMBEDDED_RESOURCE="embedded-resource-block",s.TABLE="table",s.TABLE_ROW="table-row",s.TABLE_CELL="table-cell",s.TABLE_HEADER_CELL="table-header-cell";var es={};Object.defineProperty(es,"__esModule",{value:!0}),es.INLINES=void 0,(o=es.INLINES||(es.INLINES={})).HYPERLINK="hyperlink",o.ENTRY_HYPERLINK="entry-hyperlink",o.ASSET_HYPERLINK="asset-hyperlink",o.RESOURCE_HYPERLINK="resource-hyperlink",o.EMBEDDED_ENTRY="embedded-entry-inline",o.EMBEDDED_RESOURCE="embedded-resource-inline";var eo={};Object.defineProperty(eo,"__esModule",{value:!0}),(l=b||(b={})).BOLD="bold",l.ITALIC="italic",l.UNDERLINE="underline",l.CODE="code",l.SUPERSCRIPT="superscript",l.SUBSCRIPT="subscript",eo.default=b;var el={};u=en&&en.__spreadArray||function(e,t,r){if(r||2==arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},d=en&&en.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Object.defineProperty(el,"__esModule",{value:!0}),el.V1_MARKS=el.V1_NODE_TYPES=el.TEXT_CONTAINERS=el.HEADINGS=el.CONTAINERS=el.VOID_BLOCKS=el.TABLE_BLOCKS=el.LIST_ITEM_BLOCKS=el.TOP_LEVEL_BLOCKS=void 0,p=d(eo),el.TOP_LEVEL_BLOCKS=[ea.BLOCKS.PARAGRAPH,ea.BLOCKS.HEADING_1,ea.BLOCKS.HEADING_2,ea.BLOCKS.HEADING_3,ea.BLOCKS.HEADING_4,ea.BLOCKS.HEADING_5,ea.BLOCKS.HEADING_6,ea.BLOCKS.OL_LIST,ea.BLOCKS.UL_LIST,ea.BLOCKS.HR,ea.BLOCKS.QUOTE,ea.BLOCKS.EMBEDDED_ENTRY,ea.BLOCKS.EMBEDDED_ASSET,ea.BLOCKS.EMBEDDED_RESOURCE,ea.BLOCKS.TABLE],el.LIST_ITEM_BLOCKS=[ea.BLOCKS.PARAGRAPH,ea.BLOCKS.HEADING_1,ea.BLOCKS.HEADING_2,ea.BLOCKS.HEADING_3,ea.BLOCKS.HEADING_4,ea.BLOCKS.HEADING_5,ea.BLOCKS.HEADING_6,ea.BLOCKS.OL_LIST,ea.BLOCKS.UL_LIST,ea.BLOCKS.HR,ea.BLOCKS.QUOTE,ea.BLOCKS.EMBEDDED_ENTRY,ea.BLOCKS.EMBEDDED_ASSET,ea.BLOCKS.EMBEDDED_RESOURCE],el.TABLE_BLOCKS=[ea.BLOCKS.TABLE,ea.BLOCKS.TABLE_ROW,ea.BLOCKS.TABLE_CELL,ea.BLOCKS.TABLE_HEADER_CELL],el.VOID_BLOCKS=[ea.BLOCKS.HR,ea.BLOCKS.EMBEDDED_ENTRY,ea.BLOCKS.EMBEDDED_ASSET,ea.BLOCKS.EMBEDDED_RESOURCE],el.CONTAINERS=((c={})[ea.BLOCKS.OL_LIST]=[ea.BLOCKS.LIST_ITEM],c[ea.BLOCKS.UL_LIST]=[ea.BLOCKS.LIST_ITEM],c[ea.BLOCKS.LIST_ITEM]=el.LIST_ITEM_BLOCKS,c[ea.BLOCKS.QUOTE]=[ea.BLOCKS.PARAGRAPH],c[ea.BLOCKS.TABLE]=[ea.BLOCKS.TABLE_ROW],c[ea.BLOCKS.TABLE_ROW]=[ea.BLOCKS.TABLE_CELL,ea.BLOCKS.TABLE_HEADER_CELL],c[ea.BLOCKS.TABLE_CELL]=[ea.BLOCKS.PARAGRAPH],c[ea.BLOCKS.TABLE_HEADER_CELL]=[ea.BLOCKS.PARAGRAPH],c),el.HEADINGS=[ea.BLOCKS.HEADING_1,ea.BLOCKS.HEADING_2,ea.BLOCKS.HEADING_3,ea.BLOCKS.HEADING_4,ea.BLOCKS.HEADING_5,ea.BLOCKS.HEADING_6],el.TEXT_CONTAINERS=u([ea.BLOCKS.PARAGRAPH],el.HEADINGS,!0),el.V1_NODE_TYPES=[ea.BLOCKS.DOCUMENT,ea.BLOCKS.PARAGRAPH,ea.BLOCKS.HEADING_1,ea.BLOCKS.HEADING_2,ea.BLOCKS.HEADING_3,ea.BLOCKS.HEADING_4,ea.BLOCKS.HEADING_5,ea.BLOCKS.HEADING_6,ea.BLOCKS.OL_LIST,ea.BLOCKS.UL_LIST,ea.BLOCKS.LIST_ITEM,ea.BLOCKS.HR,ea.BLOCKS.QUOTE,ea.BLOCKS.EMBEDDED_ENTRY,ea.BLOCKS.EMBEDDED_ASSET,es.INLINES.HYPERLINK,es.INLINES.ENTRY_HYPERLINK,es.INLINES.ASSET_HYPERLINK,es.INLINES.EMBEDDED_ENTRY,"text"],el.V1_MARKS=[p.default.BOLD,p.default.CODE,p.default.ITALIC,p.default.UNDERLINE];var ec={};Object.defineProperty(ec,"__esModule",{value:!0});var eu={};Object.defineProperty(eu,"__esModule",{value:!0});var ed={};Object.defineProperty(ed,"__esModule",{value:!0});var ep={nodeType:ea.BLOCKS.DOCUMENT,data:{},content:[{nodeType:ea.BLOCKS.PARAGRAPH,data:{},content:[{nodeType:"text",value:"",marks:[],data:{}}]}]};ed.default=ep;var ef={};function eE(e,t){for(var r=0,n=Object.keys(e);r<n.length;r++)if(t===e[n[r]])return!0;return!1}function ey(e){return!!e&&"object"==typeof e&&"sys"in e&&"ResourceLink"!==e.sys.type}function eh(e){return!!e&&"object"==typeof e&&"sys"in e&&"ResourceLink"===e.sys.type}function ev(e){return!!e&&"object"==typeof e&&e.content&&e.nodeType===ei.BLOCKS.DOCUMENT}Object.defineProperty(ef,"__esModule",{value:!0}),ef.isText=ef.isBlock=ef.isInline=void 0,ef.isInline=function(e){return eE(es.INLINES,e.nodeType)},ef.isBlock=function(e){return eE(ea.BLOCKS,e.nodeType)},ef.isText=function(e){return"text"===e.nodeType},f=en&&en.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),E=en&&en.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),y=en&&en.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||f(t,e,r)},h=en&&en.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&f(t,e,r);return E(t,e),t},v=en&&en.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Object.defineProperty(ei,"__esModule",{value:!0}),ei.helpers=ei.EMPTY_DOCUMENT=ei.MARKS=ei.INLINES=ei.BLOCKS=void 0,Object.defineProperty(ei,"BLOCKS",{enumerable:!0,get:function(){return ea.BLOCKS}}),Object.defineProperty(ei,"INLINES",{enumerable:!0,get:function(){return es.INLINES}}),Object.defineProperty(ei,"MARKS",{enumerable:!0,get:function(){return v(eo).default}}),y(el,ei),y(ec,ei),y(eu,ei),Object.defineProperty(ei,"EMPTY_DOCUMENT",{enumerable:!0,get:function(){return v(ed).default}}),_=h(ef),ei.helpers=_;let e_=[ei.BLOCKS.EMBEDDED_ENTRY,ei.BLOCKS.EMBEDDED_ASSET,ei.INLINES.EMBEDDED_ENTRY,ei.INLINES.ENTRY_HYPERLINK,ei.INLINES.ASSET_HYPERLINK];function eg(e){return e.sys&&"linkType"in e.sys&&e.sys.linkType===D}function eL(e,t,r){if(!r)return!0;let n=r.get(t);return!!n&&(n.fields.has(e)||n.fields.has(W(e)))}function eb(e,t,r){var n;let i=null==(n=null==r?void 0:r.get(t))?void 0:n.alias;if(!i)return e;for(let t in e){let r=null==i?void 0:i.get(t);r!==t&&(e[r]=e[t])}return e}function em(e,t,r){var n,i;try{let a=t.fields.file,s=null==a?void 0:a.details,o={...e,title:t.fields.title,description:t.fields.description,contentType:null==a?void 0:a.contentType,url:function(e){if(!e)return e;try{let t=new URL(e,"https://images.ctfassets.net");return t.protocol="https:",t.href}catch(t){return R.error(`Recevied invalid asset url "${e}"`,t),e}}(null==a?void 0:a.url),width:null==(n=null==s?void 0:s.image)?void 0:n.width,height:null==(i=null==s?void 0:s.image)?void 0:i.height};return eb(o,D,r)}catch(r){return R.warn("Failed update asset",{dataFromPreviewApp:e,updateFromEntryEditor:t},r),e}}async function eS({contentType:e,dataFromPreviewApp:t,updateFromEntryEditor:r,locale:n,entityReferenceMap:i,gqlParams:a,sendMessage:s}){var o;if(t.sys.id!==r.sys.id)return t;let l=Y(t),c=V(e.sys.id);for(let t of e.fields){let e=t.apiName??t.name;eL(e,c,a)&&(K(t)?P({dataFromPreviewApp:l,updateFromEntryEditor:r,name:e}):"RichText"===t.type?await eD({dataFromPreviewApp:l,updateFromEntryEditor:r,entityReferenceMap:i,name:e,locale:n,gqlParams:a,sendMessage:s}):"Link"===t.type?await eN({dataFromPreviewApp:l,updateFromEntryEditor:r,name:e,locale:n,entityReferenceMap:i,gqlParams:a,sendMessage:s}):"Array"===t.type&&(null==(o=t.items)?void 0:o.type)==="Link"&&await eM({dataFromPreviewApp:l,updateFromEntryEditor:r,name:e,locale:n,entityReferenceMap:i,gqlParams:a,sendMessage:s}))}return eb(l,c,a)}function eO(e){return Object.values(e).every(e=>0===e.length)}async function eA(e,t,r,n,i,a,s){if(e_.includes(e.nodeType)){if(e.data&&e.data.target&&e.data.target.sys){let o;let l={sys:{...e.data.target.sys,type:"Link",linkType:e.data.target.sys.type}};if("Entry"===e.data.target.sys.linkType?o=await ew({referenceFromPreviewApp:null,updatedReference:l,entityReferenceMap:n,locale:i,gqlParams:s,sendMessage:a}):"Asset"===e.data.target.sys.linkType&&(o=await eI({referenceFromPreviewApp:null,updatedReference:l,entityReferenceMap:n,locale:i,gqlParams:s,sendMessage:a})),o)switch(e.nodeType){case ei.BLOCKS.EMBEDDED_ENTRY:t.block.push(o);break;case ei.BLOCKS.EMBEDDED_ASSET:r.block.push(o);break;case ei.INLINES.EMBEDDED_ENTRY:t.inline.push(o);break;case ei.INLINES.ENTRY_HYPERLINK:t.hyperlink.push(o);break;case ei.INLINES.ASSET_HYPERLINK:r.hyperlink.push(o);break;default:R.warn("Unhandled nodeType in embedded entries in rich text",{nodeType:e.nodeType,ref:o})}}}else if(e.content)for(let o of e.content)await eA(o,t,r,n,i,a,s)}async function eT(e,t,r,n,i){let a={block:[],inline:[],hyperlink:[]},s={block:[],inline:[],hyperlink:[]};if(e)for(let o of e.content)await eA(o,a,s,t,r,n,i);return{entries:eO(a)?{block:[],inline:[],hyperlink:[]}:a,assets:eO(s)?{block:[],inline:[],hyperlink:[]}:s}}async function eD({dataFromPreviewApp:e,updateFromEntryEditor:t,name:r,locale:n,entityReferenceMap:i,gqlParams:a,sendMessage:s}){var o;e[r]||(e[r]={}),e[r].json=(null==(o=null==t?void 0:t.fields)?void 0:o[r])||null,e[r].links=await eT(e[r].json,i,n,s,a)}async function eI({referenceFromPreviewApp:e,updatedReference:t,entityReferenceMap:r,locale:n,gqlParams:i,sendMessage:a}){let{reference:s}=await Z({entityReferenceMap:r,referenceId:t.sys.id,isAsset:!0,locale:n,sendMessage:a});return em({...e,...t,__typename:D},s,i)}async function ew({referenceFromPreviewApp:e,updatedReference:t,entityReferenceMap:r,locale:n,gqlParams:i,sendMessage:a}){var s;let{reference:o,typeName:l}=await Z({entityReferenceMap:r,referenceId:t.sys.id,locale:n,sendMessage:a}),c={...e,...t,__typename:l};for(let e in o.fields){if(!eL(e,l,i))continue;let t=o.fields[e];t&&"object"==typeof t?(ev(t)&&(c[e]={json:t},c[e].links=await eT(t,r,n,a,i)),"sys"in t&&(c[e]=t,await eN({dataFromPreviewApp:c,updateFromEntryEditor:o,locale:n,entityReferenceMap:r,name:e,gqlParams:i,sendMessage:a}))):Array.isArray(t)&&null!=(s=t[0])&&s.sys?(c[W(e)]={items:t},await eM({dataFromPreviewApp:c,updateFromEntryEditor:o,locale:n,entityReferenceMap:r,name:e,gqlParams:i,sendMessage:a})):c[e]=t}return eb(c,l,i)}async function eC({referenceFromPreviewApp:e,updatedReference:t,entityReferenceMap:r,locale:n,gqlParams:i,sendMessage:a}){return t?e&&e.__typename?e:t.__typename?t:eg(t)?eI({referenceFromPreviewApp:e,updatedReference:t,entityReferenceMap:r,locale:n,gqlParams:i,sendMessage:a}):ew({referenceFromPreviewApp:e,updatedReference:t,entityReferenceMap:r,locale:n,gqlParams:i,sendMessage:a}):null}async function eN({dataFromPreviewApp:e,updateFromEntryEditor:t,name:r,locale:n,entityReferenceMap:i,gqlParams:a,sendMessage:s}){var o;let l=null==(o=null==t?void 0:t.fields)?void 0:o[r];e[r]=await eC({referenceFromPreviewApp:e[r],updatedReference:l,entityReferenceMap:i,locale:n,gqlParams:a,sendMessage:s})}async function eM({dataFromPreviewApp:e,updateFromEntryEditor:t,name:r,locale:n,entityReferenceMap:i,gqlParams:a,sendMessage:s}){var o;let l=W(r),c=(null==(o=null==t?void 0:t.fields)?void 0:o[r])||[],u=await Promise.all(c.map(async t=>{var r,o;let c=null==(o=null==(r=e[l])?void 0:r.items)?void 0:o.find(e=>e.sys.id===t.sys.id);return await eC({referenceFromPreviewApp:c,updatedReference:t,entityReferenceMap:i,locale:n,gqlParams:a,sendMessage:s})}));e[l]||(e[l]={items:[]}),e[l].items=u.filter(Boolean)}async function eR(e,t,r,n,i,a,s){let o;let l="urn"in t.sys?t.sys.urn:t.sys.id;if(a.has(l))R.warn("Detected a circular reference, stopping recursion"),o=a.get(l);else{let{reference:e}=await Z({entityReferenceMap:n,referenceId:t.sys.id,...eg(t)?{isAsset:!0}:void 0,locale:r,sendMessage:s});o=e,a.set(l,e)}if(!o)return e;let c=Y(o);for(let e in o.fields){let t=o.fields[e];if(ey(t)&&i<10)await eP(c,o,r,e,n,i+1,a,s);else if(Array.isArray(t)&&ey(t[0])&&i<10)await eB(c,o,r,e,n,i+1,a,s);else if(ev(t))await ej(c,o,e,r,n,i+1,a,s);else{if(eh(t)||Array.isArray(t)&&eh(t[0]))return R.warn("Detected a resource link, support is still under development."),c;P({dataFromPreviewApp:c.fields,updateFromEntryEditor:o,name:e})}}return c}async function eB(e,t,r,n,i,a,s,o){var l;if(!(null!=(l=t.fields)&&l[n])){delete e.fields[n];return}return e.fields[n]=await Promise.all(t.fields[n].map((t,l)=>{var c;return eR(null==(c=e.fields[n])?void 0:c[l],t,r,i,a+1,s,o)})).then(e=>e.filter(Boolean)),e}async function eP(e,t,r,n,i,a,s,o){var l;let c=null==(l=null==t?void 0:t.fields)?void 0:l[n];if(!c){delete e.fields[n];return}return e.fields[n]=await eR(e.fields[n],c,r,i,a+1,s,o),e}async function eK(e,t,r,n,i,a){var s;if(e_.includes(e.nodeType)&&e.data&&e.data.target&&e.data.target.sys&&("Entry"===e.data.target.sys.linkType||"Asset"===e.data.target.sys.linkType)){let o={sys:{id:(null==(s=e.data.target)?void 0:s.sys.id)||"",type:"Link",linkType:e.data.target.sys.linkType}};e.data.target=await eR(void 0,o,r,t,n+1,i,a)}if(e.content)for(let s of e.content)await eK(s,t,r,n+1,i,a)}async function ej(e,t,r,n,i,a,s,o){var l;let c=null==(l=t.fields)?void 0:l[r];if(ev(c))for(let t of(e.fields[r]=c,c.content))await eK(t,i,n,a,s,o)}async function ek(e,t,r,n,i,a,s,o){var l;if(t.sys.id!==r.sys.id)return t;for(let c of e.fields){let u="Asset"===e.name?c.id:c.apiName||c.name;if(K(c)||"File"===c.type)P({dataFromPreviewApp:t.fields,updateFromEntryEditor:r,name:u});else if("Link"===c.type&&a<10)await eP(t,r,n,u,i,a+1,s,o);else if("Array"===c.type&&(null==(l=c.items)?void 0:l.type)==="Link"&&a<10)await eB(t,r,n,u,i,a+1,s,o);else if("RichText"===c.type)await ej(t,r,u,n,i,a,s,o);else if("ResourceLink"===c.type)return R.warn("Detected a resource link, support is still under development."),t}return t}class eU{constructor({locale:e,targetOrigin:t}){T(this,"subscriptions",new Map),T(this,"storage"),T(this,"defaultLocale"),T(this,"sendMessage"),this.defaultLocale=e,this.sendMessage=(e,r)=>H(e,r,t),this.storage=new G("live-updates",new Map),window.addEventListener("beforeunload",()=>this.clearStorage())}async mergeEntity({contentType:e,dataFromPreviewApp:t,entityReferenceMap:r,locale:n,updateFromEntryEditor:i,gqlParams:a}){return"__typename"in t?{data:await ("Asset"===t.__typename?em(t,i,a):eS({contentType:e,dataFromPreviewApp:t,updateFromEntryEditor:i,locale:n,entityReferenceMap:r,gqlParams:a,sendMessage:this.sendMessage})),updated:!0}:this.isCfEntity(t)?{data:await ek(e,t,i,n,r,0,new Map,this.sendMessage),updated:!0}:{updated:!1,data:t}}async mergeNestedReference({dataFromPreviewApp:e,...t},r){let n=w(e)&&e.sys.id,i=r&&n,a=!1,s=(i?this.storage.get(n,t.locale):void 0)||e;if(w(s)&&n===t.updateFromEntryEditor.sys.id){let e=await this.mergeEntity({...t,dataFromPreviewApp:s});s=e.data,a=e.updated}else for(let e in s)if(s[e]&&"object"==typeof s[e]){let r=await this.merge({...t,dataFromPreviewApp:s[e]},!1);s[e]=r.data,a=a||r.updated}return i&&this.storage.set(n,t.locale,s),{data:s,updated:a}}async merge({dataFromPreviewApp:e,...t},r=!0){if(Array.isArray(e)){let n=[],i=!1;for(let a of e){let e=await this.mergeNestedReference({...t,dataFromPreviewApp:a},r);n.push(e.data),i=i||e.updated}return{data:n,updated:i}}return this.mergeNestedReference({...t,dataFromPreviewApp:e},r)}isCfEntity(e){return w(e)&&"fields"in e}async receiveMessage(e){if("action"in e&&"ENTRY_UPDATED"===e.action||e.method===ee.ENTRY_UPDATED){let{entity:t,contentType:r,entityReferenceMap:n}=e;await Promise.all([...this.subscriptions].map(async([,e])=>{try{let{updated:i,data:a}=await this.merge({dataFromPreviewApp:Y(e.data),locale:e.locale||this.defaultLocale,updateFromEntryEditor:t,contentType:r,entityReferenceMap:n,gqlParams:e.gqlParams});i&&e.callback(a)}catch(r){this.sendErrorMessage({message:r.message,payload:{data:e.data,update:t},type:"SUBSCRIPTION_UPDATE_FAILED"}),R.error("Failed to apply live update",{error:r,subscribedData:e.data,updateFromEditor:t})}}))}}async restore(e,t,r){let n;if(!e)return;let i=e=>{if(w(e)){let r=this.storage.get(e.sys.id,t);if(r)return r}return e};if(Array.isArray(e))n=e.map(i);else{let t=i(e);t!==e&&(n=t)}let a=this.subscriptions.get(r);a&&n&&a.callback(n)}clearStorage(){this.storage.clear()}sendErrorMessage(e){this.sendMessage(ee.ERROR,e)}subscribe(e){let{isGQL:t,isValid:r,sysId:n,isREST:i}=function(e){let{isGQL:t,sysId:r,isREST:n}=function e(t){if(Array.isArray(t)){for(let r of t){let t=e(r);if(Object.values(t).includes(!0))return t}return{isGQL:!1,sysId:null,isREST:!1}}{let r=Object.hasOwn(t,"__typename"),n=Object.hasOwn(t,"sys")?t.sys.id:null,i=Object.hasOwn(t,"fields");return r||n||i?{isGQL:r,sysId:n,isREST:i}:e(Object.values(t))}}(e);return r?t||n?{isGQL:t,isREST:n,sysId:r,isValid:!0}:(R.error('For live updates as a basic requirement the provided data must include the "fields" property for REST or "__typename" for Graphql, otherwise the data will be treated as invalid and live updates are not applied.',e),{isValid:!1,sysId:r,isGQL:t,isREST:n}):(R.error('Live Updates requires the "sys.id" to be present on the provided data',e),{isValid:!1,sysId:r,isGQL:t,isREST:n})}(e.data);if(!r)return this.sendErrorMessage({message:"Failed to subscribe",payload:{isGQL:t,isValid:r,sysId:n,isREST:i},type:"SUBSCRIPTION_SETUP_FAILED"}),()=>{};let a=`${performance.now()}-${Math.random().toString(36).slice(2)}`,s=e.locale||this.defaultLocale;return this.subscriptions.set(a,{...e,sysId:n,gqlParams:e.query?function(e){var t;let r=[];for(let n of e.definitions)if("OperationDefinition"===n.kind||"FragmentDefinition"===n.kind){let e="typeCondition"in n?n.typeCondition.name.value:null==(t=n.name)?void 0:t.value;if(!e){R.warn("Could not generate __typename for query definition",n);continue}for(let t of n.selectionSet.selections)"Field"===t.kind&&r.push(...function e(t,r){var n,i;let a=[];for(let s of t)"Field"===s.kind&&(a.push({name:s.name.value,alias:null==(n=s.alias)?void 0:n.value,__typename:r}),null!=(i=s.selectionSet)&&i.selections&&a.push(...e(s.selectionSet.selections,"items"===s.name.value&&function(e){if(e.endsWith(Q))return V(e.replace(Q,""))}(r)||s.name.value)));return a}(n.selectionSet.selections,e))}let n=new Map;for(let{__typename:e,alias:t,name:i}of r){let r=n.get(e)||{alias:new Map,fields:new Set};r.fields.add(i),t&&r.alias.set(i,t),n.set(e,r)}return n}(e.query):void 0}),setTimeout(()=>{this.restore(e.data,s,a)},0),this.sendMessage(ee.SUBSCRIBED,{action:ee.SUBSCRIBED,type:t?"GQL":"REST",locale:s,entryId:n,event:"edit"}),()=>{this.subscriptions.delete(a)}}}class eF{constructor({locale:e}){T(this,"locale"),T(this,"subscription"),this.locale=e}subscribe(e){return this.subscription&&R.log("There is already a subscription for the save event, the existing one will be replaced."),this.subscription=e,()=>{this.subscription=void 0}}receiveMessage(e){if(e.method===ee.ENTRY_SAVED&&this.subscription){let{entity:t}=e;C().includes(t.sys.id)&&this.subscription(t)}}}let eH=["https://app.contentful.com","https://app.eu.contentful.com"],eG=class e{static init(t){if("object"!=typeof t||!(null!=t&&t.locale))throw Error("Init function have to be called with a locale configuration (for example: `ContentfulLivePreview.init({ locale: 'en-US'})`)");let{debugMode:r,enableInspectorMode:n,enableLiveUpdates:i,locale:a,targetOrigin:s=eH}=t;if("u">typeof window){if(!function(){var e;try{return(null==(e=window.top)?void 0:e.location.href)!==window.location.href}catch{return!0}}())return this.liveUpdatesEnabled=!1,Promise.resolve(null);if(r&&(N=r),"boolean"==typeof n&&(this.inspectorModeEnabled=n),"boolean"==typeof i&&(this.liveUpdatesEnabled=i),this.locale=a,this.targetOrigin=Array.isArray(s)?s:[s],this.initialized)return R.log("You have already initialized the Live Preview SDK."),Promise.resolve(e.inspectorMode);this.inspectorModeEnabled&&(this.inspectorMode=new er({locale:a,targetOrigin:this.targetOrigin})),this.liveUpdatesEnabled&&(this.liveUpdates=new eU({locale:a,targetOrigin:this.targetOrigin}),this.saveEvent=new eF({locale:a})),window.addEventListener("message",e=>{var t,r,n;if("object"==typeof e.data&&e.data&&("from"in e.data&&"live-preview"===e.data.from||"source"in e.data&&"live-preview-editor"===e.data.source)){if(R.log("Received message",e.data),"action"in e.data&&"DEBUG_MODE_ENABLED"===e.data.action||e.data.method===ee.DEBUG_MODE_ENABLED){N=!0;return}this.inspectorModeEnabled&&(null==(t=this.inspectorMode)||t.receiveMessage(e.data)),this.liveUpdatesEnabled&&(null==(r=this.liveUpdates)||r.receiveMessage(e.data),null==(n=this.saveEvent)||n.receiveMessage(e.data))}}),function(e,t=500){let r=window.location.href;setInterval(()=>{let t=window.location.href;t!==r&&(r=t,e(t))},t)}(()=>{H(ee.URL_CHANGED,{action:ee.URL_CHANGED,taggedElementCount:document.querySelectorAll(`[${I.ENTRY_ID}]`).length},this.targetOrigin)});let t=document.querySelectorAll(`[${I.ENTRY_ID}]`).length;return H(ee.CONNECTED,{action:ee.CONNECTED,connected:!0,tags:t,taggedElementCount:t,locale:this.locale,isInspectorEnabled:this.inspectorModeEnabled,isLiveUpdatesEnabled:this.liveUpdatesEnabled},this.targetOrigin),this.initialized=!0,Promise.resolve(e.inspectorMode)}}static subscribe(e,t){if(!this.liveUpdatesEnabled)return()=>{};let r="string"==typeof e?e:"edit",n="object"==typeof e?e:t;if("save"===r){if(!this.saveEvent)throw Error("Save event is not initialized, please call `ContentfulLivePreview.init()` first.");return this.saveEvent.subscribe(n.callback)}if(!this.liveUpdates)throw Error("Live updates are not initialized, please call `ContentfulLivePreview.init()` first.");return this.liveUpdates.subscribe(n)}static getProps({fieldId:e,entryId:t,locale:r}){return this.inspectorModeEnabled?e&&t?{[I.FIELD_ID]:e,[I.ENTRY_ID]:t,[I.LOCALE]:r}:(R.warn("Missing property for inspector mode",{fieldId:e,entryId:t}),null):null}static toggleInspectorMode(){return this.inspectorModeEnabled=!this.inspectorModeEnabled,this.inspectorModeEnabled}static toggleLiveUpdatesMode(){return this.liveUpdatesEnabled=!this.liveUpdatesEnabled,this.liveUpdatesEnabled}static openEntryInEditor({fieldId:e,entryId:t,locale:r}){e&&t||R.error("Please provide field id and entry id to openEntryInEditor."),et(e,t,r||this.locale,this.targetOrigin)}static getEntryList(){return C()}};T(eG,"initialized",!1),T(eG,"inspectorMode",null),T(eG,"liveUpdates",null),T(eG,"saveEvent",null),T(eG,"inspectorModeEnabled",!0),T(eG,"liveUpdatesEnabled",!0),T(eG,"locale"),T(eG,"sendMessage"),T(eG,"targetOrigin");var eY={exports:{}},eq={};eY.exports=function(){if(m)return eq;m=1;var e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,n=S.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(t,a,s){var o,l={},c=null,u=null;for(o in void 0!==s&&(c=""+s),void 0!==a.key&&(c=""+a.key),void 0!==a.ref&&(u=a.ref),a)r.call(a,o)&&!i.hasOwnProperty(o)&&(l[o]=a[o]);if(t&&t.defaultProps)for(o in a=t.defaultProps)void 0===l[o]&&(l[o]=a[o]);return{$$typeof:e,type:t,key:c,ref:u,props:l,_owner:n.current}}return eq.Fragment=t,eq.jsx=a,eq.jsxs=a,eq}();var ex=eY.exports,e$={exports:{}};e$.exports,function(e,t){var r,n,i,a="__lodash_hash_undefined__",s="[object Arguments]",o="[object Array]",l="[object Boolean]",c="[object Date]",u="[object Error]",d="[object Function]",p="[object Map]",f="[object Number]",E="[object Object]",y="[object Promise]",h="[object RegExp]",v="[object Set]",_="[object String]",g="[object WeakMap]",L="[object ArrayBuffer]",b="[object DataView]",m=/^\[object .+?Constructor\]$/,S=/^(?:0|[1-9]\d*)$/,O={};O["[object Float32Array]"]=O["[object Float64Array]"]=O["[object Int8Array]"]=O["[object Int16Array]"]=O["[object Int32Array]"]=O["[object Uint8Array]"]=O["[object Uint8ClampedArray]"]=O["[object Uint16Array]"]=O["[object Uint32Array]"]=!0,O[s]=O[o]=O[L]=O[l]=O[b]=O[c]=O[u]=O[d]=O[p]=O[f]=O[E]=O[h]=O[v]=O[_]=O[g]=!1;var A="object"==typeof en&&en&&en.Object===Object&&en,T="object"==typeof self&&self&&self.Object===Object&&self,D=A||T||Function("return this")(),I=t&&!t.nodeType&&t,w=I&&e&&!e.nodeType&&e,C=w&&w.exports===I,N=C&&A.process,M=function(){try{return N&&N.binding&&N.binding("util")}catch{}}(),R=M&&M.isTypedArray;function B(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function P(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var K=Array.prototype,j=Function.prototype,k=Object.prototype,U=D["__core-js_shared__"],F=j.toString,H=k.hasOwnProperty,G=(r=/[^.]+$/.exec(U&&U.keys&&U.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",Y=k.toString,q=RegExp("^"+F.call(H).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=C?D.Buffer:void 0,$=D.Symbol,z=D.Uint8Array,Q=k.propertyIsEnumerable,V=K.splice,W=$?$.toStringTag:void 0,J=Object.getOwnPropertySymbols,X=x?x.isBuffer:void 0,Z=(n=Object.keys,i=Object,function(e){return n(i(e))}),ee=eA(D,"DataView"),et=eA(D,"Map"),er=eA(D,"Promise"),ei=eA(D,"Set"),ea=eA(D,"WeakMap"),es=eA(Object,"create"),eo=eI(ee),el=eI(et),ec=eI(er),eu=eI(ei),ed=eI(ea),ep=$?$.prototype:void 0,ef=ep?ep.valueOf:void 0;function eE(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ey(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function eh(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ev(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new eh;++t<r;)this.add(e[t])}function e_(e){var t=this.__data__=new ey(e);this.size=t.size}function eg(e,t){for(var r=e.length;r--;)if(ew(e[r][0],t))return r;return -1}function eL(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":W&&W in Object(e)?function(e){var t=H.call(e,W),r=e[W];try{e[W]=void 0;var n=!0}catch{}var i=Y.call(e);return n&&(t?e[W]=r:delete e[W]),i}(e):Y.call(e)}function eb(e){return eK(e)&&eL(e)==s}function em(e,t,r,n,i,a){var s=1&r,o=e.length,l=t.length;if(o!=l&&!(s&&l>o))return!1;var c=a.get(e);if(c&&a.get(t))return c==t;var u=-1,d=!0,p=2&r?new ev:void 0;for(a.set(e,t),a.set(t,e);++u<o;){var f=e[u],E=t[u];if(n)var y=s?n(E,f,u,t,e,a):n(f,E,u,e,t,a);if(void 0!==y){if(y)continue;d=!1;break}if(p){if(!function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}(t,function(e,t){if(!p.has(t)&&(f===e||i(f,e,r,n,a)))return p.push(t)})){d=!1;break}}else if(!(f===E||i(f,E,r,n,a))){d=!1;break}}return a.delete(e),a.delete(t),d}function eS(e){var t;return t=function(e){return null!=e&&eB(e.length)&&!eR(e)?function(e,t){var r,n=eN(e),i=!n&&eC(e),a=!n&&!i&&eM(e),s=!n&&!i&&!a&&ej(e),o=n||i||a||s,l=o?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=l.length;for(var u in e)H.call(e,u)&&!(o&&("length"==u||a&&("offset"==u||"parent"==u)||s&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||(r=(r=c)??9007199254740991)&&("number"==typeof u||S.test(u))&&u>-1&&u%1==0&&u<r))&&l.push(u);return l}(e):function(e){if(t=e&&e.constructor,e!==("function"==typeof t&&t.prototype||k))return Z(e);var t,r=[];for(var n in Object(e))H.call(e,n)&&"constructor"!=n&&r.push(n);return r}(e)}(e),eN(e)?t:function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}(t,eT(e))}function eO(e,t){var r,n=e.__data__;return("string"==(r=typeof t)||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?n["string"==typeof t?"string":"hash"]:n.map}function eA(e,t){var r=null==e?void 0:e[t];return!(!eP(r)||G&&G in r)&&(eR(r)?q:m).test(eI(r))?r:void 0}eE.prototype.clear=function(){this.__data__=es?es(null):{},this.size=0},eE.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},eE.prototype.get=function(e){var t=this.__data__;if(es){var r=t[e];return r===a?void 0:r}return H.call(t,e)?t[e]:void 0},eE.prototype.has=function(e){var t=this.__data__;return es?void 0!==t[e]:H.call(t,e)},eE.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=es&&void 0===t?a:t,this},ey.prototype.clear=function(){this.__data__=[],this.size=0},ey.prototype.delete=function(e){var t=this.__data__,r=eg(t,e);return!(r<0)&&(r==t.length-1?t.pop():V.call(t,r,1),--this.size,!0)},ey.prototype.get=function(e){var t=this.__data__,r=eg(t,e);return r<0?void 0:t[r][1]},ey.prototype.has=function(e){return eg(this.__data__,e)>-1},ey.prototype.set=function(e,t){var r=this.__data__,n=eg(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},eh.prototype.clear=function(){this.size=0,this.__data__={hash:new eE,map:new(et||ey),string:new eE}},eh.prototype.delete=function(e){var t=eO(this,e).delete(e);return this.size-=t?1:0,t},eh.prototype.get=function(e){return eO(this,e).get(e)},eh.prototype.has=function(e){return eO(this,e).has(e)},eh.prototype.set=function(e,t){var r=eO(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},ev.prototype.add=ev.prototype.push=function(e){return this.__data__.set(e,a),this},ev.prototype.has=function(e){return this.__data__.has(e)},e_.prototype.clear=function(){this.__data__=new ey,this.size=0},e_.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},e_.prototype.get=function(e){return this.__data__.get(e)},e_.prototype.has=function(e){return this.__data__.has(e)},e_.prototype.set=function(e,t){var r=this.__data__;if(r instanceof ey){var n=r.__data__;if(!et||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new eh(n)}return r.set(e,t),this.size=r.size,this};var eT=J?function(e){return null==e?[]:function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,a=[];++r<n;){var s=e[r];t(s,r,e)&&(a[i++]=s)}return a}(J(e=Object(e)),function(t){return Q.call(e,t)})}:function(){return[]},eD=eL;function eI(e){if(null!=e){try{return F.call(e)}catch{}try{return e+""}catch{}}return""}function ew(e,t){return e===t||e!=e&&t!=t}(ee&&eD(new ee(new ArrayBuffer(1)))!=b||et&&eD(new et)!=p||er&&eD(er.resolve())!=y||ei&&eD(new ei)!=v||ea&&eD(new ea)!=g)&&(eD=function(e){var t=eL(e),r=t==E?e.constructor:void 0,n=r?eI(r):"";if(n)switch(n){case eo:return b;case el:return p;case ec:return y;case eu:return v;case ed:return g}return t});var eC=eb(function(){return arguments}())?eb:function(e){return eK(e)&&H.call(e,"callee")&&!Q.call(e,"callee")},eN=Array.isArray,eM=X||function(){return!1};function eR(e){if(!eP(e))return!1;var t=eL(e);return t==d||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function eB(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function eP(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function eK(e){return null!=e&&"object"==typeof e}var ej=R?function(e){return R(e)}:function(e){return eK(e)&&eB(e.length)&&!!O[eL(e)]};e.exports=function(e,t){return function e(t,r,n,i,a){return t===r||(null!=t&&null!=r&&(eK(t)||eK(r))?function(e,t,r,n,i,a){var d=eN(e),y=eN(t),g=d?o:eD(e),m=y?o:eD(t);g=g==s?E:g,m=m==s?E:m;var S=g==E,O=m==E,A=g==m;if(A&&eM(e)){if(!eM(t))return!1;d=!0,S=!1}if(A&&!S)return a||(a=new e_),d||ej(e)?em(e,t,r,n,i,a):function(e,t,r,n,i,a,s){switch(r){case b:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case L:return!(e.byteLength!=t.byteLength||!a(new z(e),new z(t)));case l:case c:case f:return ew(+e,+t);case u:return e.name==t.name&&e.message==t.message;case h:case _:return e==t+"";case p:var o=B;case v:var d=1&n;if(o||(o=P),e.size!=t.size&&!d)break;var E=s.get(e);if(E)return E==t;n|=2,s.set(e,t);var y=em(o(e),o(t),n,i,a,s);return s.delete(e),y;case"[object Symbol]":if(ef)return ef.call(e)==ef.call(t)}return!1}(e,t,g,r,n,i,a);if(!(1&r)){var T=S&&H.call(e,"__wrapped__"),D=O&&H.call(t,"__wrapped__");if(T||D){var I=T?e.value():e,w=D?t.value():t;return a||(a=new e_),i(I,w,r,n,a)}}return!!A&&(a||(a=new e_),function(e,t,r,n,i,a){var s=1&r,o=eS(e),l=o.length;if(l!=eS(t).length&&!s)return!1;for(var c=l;c--;){var u=o[c];if(!(s?u in t:H.call(t,u)))return!1}var d=a.get(e);if(d&&a.get(t))return d==t;var p=!0;a.set(e,t),a.set(t,e);for(var f=s;++c<l;){var E=e[u=o[c]],y=t[u];if(n)var h=s?n(y,E,u,t,e,a):n(E,y,u,e,t,a);if(!(void 0===h?E===y||i(E,y,r,n,a):h)){p=!1;break}f||(f="constructor"==u)}if(p&&!f){var v=e.constructor,_=t.constructor;v!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _)&&(p=!1)}return a.delete(e),a.delete(t),p}(e,t,r,n,i,a))}(t,r,n,i,e,a):t!=t&&r!=r)}(e,t)}}(e$,e$.exports);let ez=(g=e$.exports)&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g,eQ=(0,S.createContext)(null);function eV({children:e,locale:t,debugMode:r=!1,enableInspectorMode:n=!0,enableLiveUpdates:i=!0,targetOrigin:a}){if(!t)throw Error('ContentfulLivePreviewProvider have to be called with a locale property (for example: `<ContentfulLivePreviewProvider locale="en-US">{children}</ContentfulLivePreviewProvider>`');eG.init({locale:t,debugMode:r,enableInspectorMode:n,enableLiveUpdates:i,targetOrigin:a});let s=(0,S.useMemo)(()=>({locale:t,debugMode:r,enableInspectorMode:n,enableLiveUpdates:i,targetOrigin:a}),[t,r,n,i,a]);return ex.jsx(eQ.Provider,{value:s,children:e})}function eW(e,t,r=!1){var n,i;let[a,s]=(0,S.useState)({data:e,version:1}),o=(0,S.useRef)(e),l=(0,S.useRef)(function(e,t=100){let r;return(...n)=>{clearTimeout(r),r=setTimeout(()=>{e.apply(this,n)},t)}}(s)),c=(0,S.useContext)(eQ),u="object"==typeof t?t:{locale:t,skip:r},d=(0,S.useMemo)(()=>(!c||!!c.enableLiveUpdates)&&!u.skip&&!!(Array.isArray(e)&&e.length||e&&"object"==typeof e&&Object.keys(e).length),[c,u.skip,e]);return n=()=>{if(o.current!==e&&(s({data:e,version:1}),o.current=e),d)return eG.subscribe("edit",{data:e,locale:u.locale,query:u.query,callback:e=>{l.current(t=>({data:e,version:t.version+1}))}})},i=[e,d,u.locale,u.query],(0,S.useEffect)(n,function(e){let t=(0,S.useRef)(e),r=(0,S.useRef)(0);return ez(e,t.current)||(t.current=e,r.current+=1),(0,S.useMemo)(()=>t.current,[r.current])}(i)),a.data}function eJ(e){let t=(0,S.useContext)(eQ);return(0,S.useCallback)(r=>null!=t&&t.enableInspectorMode?eG.getProps({...e,...r}):null,[null==t?void 0:t.enableInspectorMode,e])}}}]);